## Step 2
```
kubectl get pods  
NAME                                         READY   STATUS    RESTARTS       AGE
moscow-time-7d7b489975-q8mfz                 1/1     Running   1 (108s ago)   6d2h
moscow-time-app-deployment-fdb547d76-59284   1/1     Running   2 (108s ago)   12d
moscow-time-app-deployment-fdb547d76-kmlg6   1/1     Running   2 (108s ago)   12d
moscow-time-app-deployment-fdb547d76-tnbfv   1/1     Running   2 (108s ago)   12d
```
```
kubectl create secret generic admin-pass --from-literal=username=admin --from-literal=password='admin'
secret/admin-pass created
```
```
kubectl get secrets
NAME                                TYPE                 DATA   AGE
admin-pass                          Opaque               2      19s
sh.helm.release.v1.moscow-time.v1   helm.sh/release.v1   1      6d2h
```
```
kubectl describe secret admin-pass
Name:         admin-pass
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  Opaque

Data
====
password:  7 bytes
username:  5 bytes
```
```
kubectl get secret admin-pass -o jsonpath='{.data}'
'{"password":"J2FkbWluJw==","username":"YWRtaW4="}'
```
```
echo 'J2FkbWluJw==' | base64 --decode
'admin'
```

## Step 3
```
helm plugin install https://github.com/jkroepke/helm-secrets --version v4.2.0
Installed plugin: secrets
```

```
gpg --gen-key
gpg (GnuPG) 2.2.29-unknown; Copyright (C) 2021 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Note: Use "gpg --full-generate-key" for a full featured key generation dialog.

GnuPG needs to construct a user ID to identify your key.

Real name: GlebSmetanin
Email address: smetanin.glebka@gmail.com
You selected this USER-ID:
    "GlebSmetanin <smetanin.glebka@gmail.com>"

Change (N)ame, (E)mail, or (O)kay/(Q)uit? O
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
gpg: key DB637EAA41E90F4D marked as ultimately trusted
gpg: revocation certificate stored as '/c/Users/User/.gnupg/openpgp-revocs.d/3B7D7C0F7AFB2834EF3CE2CEDB637EAA41E90F4D.rev'
public and secret key created and signed.

pub   rsa3072 2022-11-13 [SC] [expires: 2024-11-12]
      3B7D7C0F7AFB2834EF3CE2CEDB637EAA41E90F4D
uid                      GlebSmetanin <smetanin.glebka@gmail.com>
sub   rsa3072 2022-11-13 [E] [expires: 2024-11-12]

```

```
sops -p 3B7D7C0F7AFB2834EF3CE2CEDB637EAA41E90F4D secrets.yaml
[PGP]    time="2022-11-13T20:20:45+03:00" level=warning msg="Deprecation Warning: GPG key fetching from a keyserver within sops will be removed in a future version of sops. See https://github.com/mozilla/sops/issues/727 for more information."

```

```
$ helm secrets install moscow-time ./ -f ./secrets.yaml
[helm-secrets] Decrypt: ./secrets.yaml
NAME: moscow-time
LAST DEPLOYED: Sun Nov 13 21:22:59 2022
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=moscow-time,app.kubernetes.io/instance=moscow-time" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT

[helm-secrets] Removed: ./secrets.yaml.dec

```
```
$ kubectl get pods
NAME                                         READY   STATUS    RESTARTS       AGE
moscow-time-579fccd46-d24wm                  0/1     Running   0              8s
```

```
kubectl exec moscow-time-579fccd46-d24wm  -- printenv | grep APP_PASSWORD
APP_PASSWORD=admin
```

```
kubectl describe pod moscow-time-579fccd46-d24wm  | grep -A 5 Limits
    Limits:
      cpu:     100m
      memory:  128Mi
    Requests:
      cpu:      100m
      memory:   128Mi
```